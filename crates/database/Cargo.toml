[package]
name = "autopulse-database"
version = "0.1.0"
edition = "2021"
build = "src/build.rs"

[features]
postgres = ["diesel/postgres", "diesel_migrations/postgres"]
sqlite = ["diesel/sqlite", "diesel_migrations/sqlite"]
vendored = ["pq-sys/bundled", "libsqlite3-sys/bundled"]

[dependencies]
# Crates
autopulse-utils = { workspace = true }

# Core
anyhow = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }
tracing = { workspace = true }
tracing-subscriber = { workspace = true }
tokio = { workspace = true }
chrono = { workspace = true }

# Database
diesel = { version = "2.2.4", features = [
    "returning_clauses_for_sqlite_3_35",
    "r2d2",
    "chrono",
] }
diesel_migrations = { version = "2.2.0" }
pq-sys = "0.6.3"
# mysqlclient-sys = "0.4.1"
libsqlite3-sys = "0.30.1"
